---
import type Product from "src/types/product";
import ItemProductoBox from "./ItemProductoBox.astro";
import NavPag from "./NavPag.astro";
import ProductoList from "./ProductoList.astro";
import  getColors  from "@utils/getColors";
import { capitalize } from "@utils/capitalizeString";




interface Props {
  categoryFather: string;
  arrayCategorys: string[];
  products?: Product[];
}
const { categoryFather, arrayCategorys, products } = Astro.props;


const productColors = products?.flatMap(p => getColors(p.name));
const uniqueColors = [...new Set(productColors)];
---

<section class="sideBarCategories">
  <div class="subcategories">
    <strong>Inicio - {categoryFather}</strong>
    <ul>
      {
        arrayCategorys.map((subcat) => (
          <li>
            <a
              href={`${import.meta.env.BASE_URL}/categories/${categoryFather}/${subcat}`}
            >
              {subcat}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
  <strong>Filtrar por</strong>
  <div class="filter">
    <strong>Color</strong>
    <ul>
      {uniqueColors.map(color => (
        <li>
          <label>
            <input type="checkbox" data-color={color} /> {capitalize(color)}
          </label>
        </li>
      ))}
    </ul>
  </div>  
  <div class="subcategories">
    <strong>Marca</strong>
    <ul>
      {
        arrayCategorys.map((subcat) => (
          <li>
            <a
              href={`${import.meta.env.BASE_URL}/categories/${categoryFather}/${subcat}`}
            >
              {subcat}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
  <div class="subcategories">
    <strong>Modelo</strong>
    <ul>
      {
        arrayCategorys.map((subcat) => (
          <li>
            <a
              href={`${import.meta.env.BASE_URL}/categories/${categoryFather}/${subcat}`}
            >
              {subcat}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</section>

<style>
.sideBarCategories {
  width: 500px;
  padding: 70px;
  border-right: 1px solid #151515;
  display: flex;
  flex-direction: column;
  gap: 25px;
  font-family: sans-serif;
}

/* --- Subcategorías --- */
.subcategories strong {
    display: block;
  font-size: 1.7rem;
  font-weight: 600;
  margin-bottom: 15px;
}

.subcategories ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.subcategories li {
  margin-bottom: 12px;
  font-size: 1.4rem;
}

.subcategories a {
  text-decoration: none;
  color: #000;
  transition: 0.2s;
}

.subcategories a:hover {
  opacity: 0.6;
}

/* --- Título "Filtrar por" --- */
.sideBarCategories > strong {
  font-size: 1.4rem;
  font-weight: 700;
  margin-top: 10px;
}


/* --- Sección de filtros --- */

.filter strong {
  display: block;
  font-size: 1.7rem;
  font-weight: 600;
  margin-bottom: 15px;
}

.filter ul {
  padding: 0;
  margin: 0;
  list-style: none;
}

.filter li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 1.4rem;
  margin-bottom: 14px;
}

/* Checkboxes estilo moderno */
.filter input[type="checkbox"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
  appearance: none;
  border: 2px solid #555;
  border-radius: 6px;
  transition: 0.2s;
}

.filter input[type="checkbox"]:checked {
  background-color: #000;
  border-color: #000;
}

/* Centrado del texto y checkbox */
.filter label {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  cursor: pointer;
}
.filter label {
  flex-direction: row-reverse;
}


</style>
